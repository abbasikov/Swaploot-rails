<div class="p-6">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="flex item-center">
      <div class= "flex item-center">
        <div class="flex items-center justify-center ">
          <h2 class="text-2xl font-bold">Inventory</h2>
          <i id="refreshTable" class="fa fa-refresh" aria-hidden="true"></i>
        </div>
        <h3 class="mt-[8px] ml-[92px]">Total Worth: <%= "$#{@total_market_price}" %></h3>
      </div>
      <div class="p-2 flex item-center justify-between ml-[500px]">
      <%= form_tag(inventories_path, method: :get, id: 'inventoryForm') do %>
        <label>
          <%= select_tag 'tradable', options_for_select([['All', nil], ['Tradable', true], ['Non-Tradable', false]], params[:tradable]), class: 'w-[100%] rounded-lg p-2', onchange: 'submitForm()' %>
        </label>
      <% end %>
      </div>
    </div>
         <%= render partial: 'inventory' , locals:{ inventories: @inventories }%>
  </div>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div style= "display: flex;">
      <h2 class="text-2xl font-bold mb-4">Missing Items</h2>
    </div>
      <%= render partial: 'missing_items' , locals:{ missing_items: @missing_items }%>
  </div>
</div>

<script>
    $(document).ready(function() {
        const searchInputs = document.querySelectorAll('input[type="search"]');
        searchInputs.forEach(function(input) {
            input.style.marginBottom = '10px';
        });

        const dataTables = document.querySelectorAll('.dataTable');
        dataTables.forEach((el) => {
            el.style.border = '1px solid black';
        });

        var elements = document.querySelectorAll('.dataTables_length');
        for (var i = 0; i < elements.length; i++) {
            elements[i].parentNode.removeChild(elements[i]);
        }

      $('#refreshTable').click(function() {
            $.ajax({
                url: '<%= inventories_path(format: :js) %>',
                method: 'GET',
                error: function(jqXHR, textStatus, errorThrown) {
                    console.error('Error refreshing table', textStatus, errorThrown);
                }
            });
        });
    });
    function submitForm() {
      document.getElementById("inventoryForm").submit();
    }
</script>
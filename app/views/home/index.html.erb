<div class="p-6">
    <div class="flex">
        <h1 class="text-2xl text-blue-600 font-[500]">Balance</h1>
        <i class="fa fa-refresh cursor-pointer text-blue-600" aria-hidden="true" id="refresh-balance"></i>
    </div>

    <div class="balance-container" id="balance-container">
        <div class="flex items-center justify-center gap-5" id="balance-container">
        <div class="relative flex flex-col mt-6 text-gray-700 bg-green-50 shadow-md bg-clip-border rounded-xl w-96">
            <div class="p-6">
                <div class="flex item-center gap-3">
                    <i class="mt-3 fa fa-lg fa-wallet text-green-500"></i>  
                    <h5 class="block mb-2 font-sans text-xl antialiased font-semibold leading-snug tracking-normal text-green-500">
                    CSGO Empire Balance
                    </h5>
                </div>
                <hr class="bg-gray-400 h-px w-full">
            </div>
            <div class="p-6 pt-0 text-2xl font-bold text-center">
                <%= @csgo_empire_balance.nil? ? "--" : "#{@csgo_empire_balance} coins" %>
            </div>
        </div>
        <div class="relative flex flex-col mt-6 text-gray-700 bg-blue-50 shadow-md bg-clip-border rounded-xl w-96">
            <div class="p-6">
                <div class="flex item-center gap-3">
                    <i class="mt-3 fa fa-lg fa-wallet text-blue-500"></i>  
                    <h5 class="block mb-2 font-sans text-xl antialiased font-semibold leading-snug tracking-normal text-blue-500">
                    CSGO Market Balance:
                    </h5>
                </div>
                <hr class="bg-gray-400 h-px w-full">
            </div>
            <div class="p-6 pt-0 text-2xl font-bold text-center">
                <%= @csgo_market_balance.nil? ? "--" : "$#{@csgo_market_balance} coins" %>
            </div>
        </div>
        <div class="relative flex flex-col mt-6 text-gray-700 bg-yellow-50 shadow-md bg-clip-border rounded-xl w-96">
            <div class="p-6">
                <div class="flex item-center gap-3">
                    <i class="mt-3 fa fa-lg fa-wallet text-yellow-500"></i>  
                    <h5 class="block mb-2 font-sans text-xl antialiased font-semibold leading-snug tracking-normal text-yellow-500">
                    Waxpeer Balance:
                    </h5>
                </div>
                <hr class="bg-gray-400 h-px w-full">
            </div>
            <div class="p-6 pt-0 text-2xl font-bold text-center">
                <%= @waxpeer_balance.nil? ? "--" : "$#{@waxpeer_balance} coins" %>
            </div>
        </div>
        </div>
    </div>
    <hr class="bg-gray-400 h-px w-full my-5">

    <div class="flex absolute">
    <h2 class="text-2xl mb-4 text-blue-600 font-[500]">Active Trades</h2>
        <i id="refreshactiveTrade" class="fa fa-refresh text-blue-600" aria-hidden="true"></i>
    </div>
    <div class="mb-5">
        <%= render partial: 'active_trade' ,locals: { active_trades: @active_trades } %>
        <hr class="bg-gray-400 h-px w-full my-5">
    </div>


    <div class="flex absolute">
        <h2 class="text-2xl mb-4 text-blue-600 font-[500]">Item Listed for Sale</h2>
        <i id = "refreshitemListed"class="fa fa-refresh text-blue-600" aria-hidden="true"></i>
    </div>
    <div class="mb-5">
        <%= render partial: 'reload_item_listed' , locals:{ item_listed_for_sale_hash: @item_listed_for_sale_hash }%> 
        <hr class="bg-gray-400 h-px w-full my-5">
    </div>

    <div class="mb-5">
        <%= render partial: 'item_sold', locals: { sold_items: @items_sold }%>
        <hr class="bg-gray-400 h-px w-full my-5">
    </div>

</div>

<script>
    function refreshBalance() {
      $.ajax({
        url: '<%= refresh_balance_path %>', // Replace with your actual route path
        type: 'GET',
        dataType: 'script',
      });
    };

    $('#refresh-balance').on('click', function () {
        refreshBalance();
    });

    $(document).ready(function() {
        refreshBalance();
        $('#dataTableItemsSold').DataTable();
         $('#dataTableInvetory').DataTable({
            "order": [[2, 'desc']],
        });
        $('#dataTableActiveTrades').DataTable();

        const searchInputs = document.querySelectorAll('input[type="search"]');
        searchInputs.forEach(function(input) {
            input.style.marginBottom = '10px'
        });

        var elements = document.querySelectorAll('.dataTables_length');
        for (var i = 0; i < elements.length; i++) {
            elements[i].parentNode.removeChild(elements[i]);
        }
     });

        function submitForm() {
            document.getElementById("postForm").submit();
        }
  
      $('#refreshactiveTrade').click(function() {
        $.ajax({
            url: '<%= home_active_trades_reload_path(format: :js) %>',
            method: 'GET',
            error: function(jqXHR, textStatus, errorThrown) {
                console.error('Error refreshing table', textStatus, errorThrown);
            }
        });

      });
        $('#refreshitemListed').click(function() {
        $.ajax({
            url: '<%= home_reload_item_listed_for_sale_path(format: :js) %>',
            method: 'GET',
            error: function(jqXHR, textStatus, errorThrown) {
                console.error('Error refreshing table', textStatus, errorThrown);
            }
         });
        });
    </script>
